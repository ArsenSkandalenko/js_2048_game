const e=document.querySelector(".controls"),t=document.querySelector(".game-score"),n=document.querySelectorAll(".field-row"),o=document.querySelector(".message-start"),r=document.querySelector(".message-win"),i=document.querySelector(".message-lose");e.insertAdjacentHTML("beforeend",`
  <button
    class="button restart hidden"
    >Restart
  </button>
`);const s=document.querySelector(".start"),l=document.querySelector(".restart"),c={isRunning:!1,isWon:!1,isLost:!1,score:0,rowsQty:n.length,colsQty:n[0].children.length,matrix:[]},u={moveRight(e){e.forEach(e=>{e.forEach((t,n)=>{0===t&&(e.splice(n,1),e.unshift(0))});for(let t=e.length-1;t>=0;t--)if(e[t]>0&&e[t]===e[t-1]){let n=2*e[t];e.splice(t-1,2,n),e.unshift(0),c.score+=n}})},moveLeft(e){e.forEach(e=>{for(let t=e.length-1;t>=0;t--)0===e[t]&&(e.splice(t,1),e.push(0));for(let t=0;t<e.length;t++)if(e[t]>0&&e[t]===e[t+1]){let n=2*e[t];e.splice(t,2,n),e.push(0),c.score+=n}})},moveUp(e){let t=d(e);this.moveLeft(t);let n=d(t);c.matrix=n},moveDown(e){let t=d(e);this.moveRight(t);let n=d(t);c.matrix=n}},m={moveLeft(e){for(let t=0;t<e.length;t++){let n=e[t];for(let e=0;e<n.length;e++){if(0!==n[e]&&n[e]===n[e+1])return!0;let t=!1;if(0===n[e]&&(t=n.slice(e).some(e=>e>0)),t)return!0}}return!1},moveRight(e){for(let t=0;t<e.length;t++){let n=e[t];for(let e=n.length;e>=0;e--){if(0!==n[e]&&n[e]===n[e-1])return!0;let t=!1;if(0===n[e]&&(t=n.slice(0,e).some(e=>e>0)),t)return!0}}return!1},moveUp(e){let t=d(e);return this.moveLeft(t)},moveDown(e){let t=d(e);return this.moveRight(t)}};function a(){let e=[];for(let t=0;t<c.rowsQty;t++){e.push([]);for(let n=0;n<c.colsQty;n++)e[t][n]=0}c.matrix=e}function f(){for(let e=0;e<c.matrix.length;e++)c.matrix[e].forEach((t,o)=>{let r=n[e].children[o];r.className="field-cell",r.textContent="",0!==t&&(r.classList.add("field-cell--"+t),r.textContent=t)});t.textContent=c.score}function h(){let e=Math.random()>.1?2:4;for(;;){let t=Math.floor(4*Math.random()),n=Math.floor(4*Math.random());if(0===c.matrix[t][n]){c.matrix[t][n]=e;break}}}function g(e,t){e.classList.toggle("hidden",t)}function d(e){let t=[];for(let n=0;n<e.length;n++){t.push([]);for(let o=0;o<e[n].length;o++)t[n].push(e[o][n])}return t}s.addEventListener("click",()=>{c.isRunning=!0,c.isWon=!1,c.score=0,g(s,c.isRunning),g(l,!c.isRunning),g(o,c.isRunning),g(r,c.isRunning),a(),h(),h(),f()}),l.addEventListener("click",()=>{c.isRunning=!0,c.isLost=!1,c.score=0,g(i,!c.isLost),a(),h(),h(),f()}),document.addEventListener("keydown",e=>{var t;let n=e.key;if(!n.startsWith("Arrow")||!c.isRunning)return;event.preventDefault();let o=n.replace("Arrow","move");m[o](c.matrix)&&(u[o](c.matrix),h(),f(),function(e){for(let t of e)if(t.some(e=>2048===e))return!0;return!1}(c.matrix)&&(c.isWon=!0,c.isRunning=!1,g(r,!c.isWon),g(l,!c.isRunning),g(s,c.isRunning)),t=c.matrix,[m.moveLeft(t),m.moveRight(t),m.moveUp(t),m.moveDown(t)].some(e=>!0===e)||(c.isRunning=!1,c.isLost=!0,g(i,!c.isLost)))});
//# sourceMappingURL=index.a3287947.js.map
