{"mappings":"C,A,WCEA,IAAM,EAAW,SAAS,aAAa,CAAC,aAClC,EAAY,SAAS,aAAa,CAAC,eAEnC,EAAO,SAAS,gBAAgB,CAAC,cAEjC,EAAW,SAAS,aAAa,CAAC,kBAClC,EAAS,SAAS,aAAa,CAAC,gBAChC,EAAU,SAAS,aAAa,CAAC,iBAEvC,EAAS,kBAAkB,CAAC,YAAc,+EAO1C,IAAM,EAAW,SAAS,aAAa,CAAC,UAClC,EAAa,SAAS,aAAa,CAAC,YAEpC,EAAO,CACX,UAAW,CAAA,EACX,MAAO,CAAA,EACP,OAAQ,CAAA,EACR,MAAO,EACP,QAAS,EAAK,MAAM,CACpB,QAAS,CAAI,CAAC,EAAE,CAAC,QAAQ,CAAC,MAAM,CAChC,OAAQ,EAAE,AACZ,EAEM,EAAQ,CACZ,UAAA,SAAU,CAAM,EACd,EAAO,OAAO,CAAC,SAAA,CAAf,EACE,EAAI,OAAO,CAAC,SAAC,CAAA,CAAK,CAAlB,EACc,IAAR,IACF,EAAI,MAAM,CAAC,EAAO,GAClB,EAAI,OAAO,CAAC,GAEhB,GAEA,IAAK,IAAI,EAAI,EAAI,MAAM,CAAG,EAAG,GAAK,EAAG,IACnC,GAAI,CAAG,CAAC,EAAE,CAAG,GAAK,CAAG,CAAC,EAAE,GAAK,CAAG,CAAC,EAAI,EAAE,CAAE,CACvC,IAAM,EAAM,AAAS,EAAT,CAAG,CAAC,EAAE,CAElB,EAAI,MAAM,CAAC,EAAI,EAAG,EAAG,GACrB,EAAI,OAAO,CAAC,GACZ,EAAK,KAAK,EAAI,CAChB,CAEJ,EACF,EAEA,SAAA,SAAS,CAAM,EACb,EAAO,OAAO,CAAC,SAAA,CAAf,EACE,IAAK,IAAI,EAAI,EAAI,MAAM,CAAG,EAAG,GAAK,EAAG,IACpB,IAAX,CAAG,CAAC,EAAE,GACR,EAAI,MAAM,CAAC,EAAG,GACd,EAAI,IAAI,CAAC,IAIb,IAAK,IAAI,EAAI,EAAG,EAAI,EAAI,MAAM,CAAE,IAC9B,GAAI,CAAG,CAAC,EAAE,CAAG,GAAK,CAAG,CAAC,EAAE,GAAK,CAAG,CAAC,EAAI,EAAE,CAAE,CACvC,IAAM,EAAM,AAAS,EAAT,CAAG,CAAC,EAAE,CAElB,EAAI,MAAM,CAAC,EAAG,EAAG,GACjB,EAAI,IAAI,CAAC,GACT,EAAK,KAAK,EAAI,CAChB,CAEJ,EACF,EAEA,OAAA,SAAO,CAAM,EACX,IAAM,EAAkB,EAAc,GAEtC,IAAI,CAAC,QAAQ,CAAC,GAEd,IAAM,EAAkB,EAAc,EAEtC,CAAA,EAAK,MAAM,CAAG,CAChB,EAEA,SAAA,SAAS,CAAM,EACb,IAAM,EAAkB,EAAc,GAEtC,IAAI,CAAC,SAAS,CAAC,GAEf,IAAM,EAAoB,EAAc,EAExC,CAAA,EAAK,MAAM,CAAG,CAChB,CACF,EAEM,EAAkB,CACtB,SAAA,SAAS,CAAM,EACb,IAAK,IAAI,EAAI,EAAG,EAAI,EAAO,MAAM,CAAE,IAGjC,IAAK,IAFC,EAAO,CAAM,CAAC,EAAE,CAEb,EAAI,EAAG,EAAI,EAAK,MAAM,CAAE,IAAK,CACpC,GAAI,AAAY,IAAZ,CAAI,CAAC,EAAE,EAAU,CAAI,CAAC,EAAE,GAAK,CAAI,CAAC,EAAI,EAAE,CAC1C,MAAO,CAAA,EAGT,IAAI,EAAc,CAAA,EAQlB,GANgB,IAAZ,CAAI,CAAC,EAAE,EAGT,CAAA,EAAc,AAFD,EAAK,KAAK,CAAC,GAEL,IAAI,CAAC,SAAA,CAAxB,EAA+B,OAAA,EAAM,C,E,EAGnC,EACF,MAAO,CAAA,CAEX,CAGF,MAAO,CAAA,CACT,EAEA,UAAA,SAAU,CAAM,EACd,IAAK,IAAI,EAAI,EAAG,EAAI,EAAO,MAAM,CAAE,IAGjC,IAAK,IAFC,EAAO,CAAM,CAAC,EAAE,CAEb,EAAI,EAAK,MAAM,CAAE,GAAK,EAAG,IAAK,CACrC,GAAI,AAAY,IAAZ,CAAI,CAAC,EAAE,EAAU,CAAI,CAAC,EAAE,GAAK,CAAI,CAAC,EAAI,EAAE,CAC1C,MAAO,CAAA,EAGT,IAAI,EAAc,CAAA,EAQlB,GANgB,IAAZ,CAAI,CAAC,EAAE,EAGT,CAAA,EAAc,AAFD,EAAK,KAAK,CAAC,EAAG,GAER,IAAI,CAAC,SAAA,CAAxB,EAA+B,OAAA,EAAM,C,E,EAGnC,EACF,MAAO,CAAA,CAEX,CAGF,MAAO,CAAA,CACT,EAEA,OAAA,SAAO,CAAM,EACX,IAAM,EAAkB,EAAc,GAEtC,OAAO,IAAI,CAAC,QAAQ,CAAC,EACvB,EAEA,SAAA,SAAS,CAAM,EACb,IAAM,EAAkB,EAAc,GAEtC,OAAO,IAAI,CAAC,SAAS,CAAC,EACxB,CACF,EAwDA,SAAS,IAGP,IAAK,IAFC,EAAS,EAAE,CAER,EAAI,EAAG,EAAI,EAAK,OAAO,CAAE,IAAK,CACrC,EAAO,IAAI,CAAC,EAAE,EAEd,IAAK,IAAI,EAAI,EAAG,EAAI,EAAK,OAAO,CAAE,IAChC,CAAM,CAAC,EAAE,CAAC,EAAE,CAAG,CAEnB,CAEA,EAAK,MAAM,CAAG,CAChB,CAEA,SAAS,IACP,IAAK,I,E,S,C,EAGH,AAFY,EAAK,MAAM,CAAC,EAAS,CAE7B,OAAO,CAAC,SAAC,CAAA,CAAW,CAAxB,EACE,IAAM,EAAe,CAAI,CAAC,EAAS,CAAC,QAAQ,CAAC,EAAU,AAEvD,CAAA,EAAa,SAAS,CAAG,aACzB,EAAa,WAAW,CAAG,GAET,IAAd,IACF,EAAa,SAAS,CAAC,GAAG,CAAC,eAAiB,GAC5C,EAAa,WAAW,CAAG,EAE/B,EACF,EAdS,EAAW,EAAG,EAAW,EAAK,MAAM,CAAC,MAAM,CAAE,IAAtD,EAAA,EAgBA,CAAA,EAAU,WAAW,CAAG,EAAK,KAAK,AACpC,CAEA,SAAS,IAGP,IAFA,IAAM,EAAM,KAAK,MAAM,GAAK,GAAM,EAAI,IAE7B,CACP,IAAM,EAAM,KAAK,KAAK,CAAC,AAAgB,EAAhB,KAAK,MAAM,IAC5B,EAAM,KAAK,KAAK,CAAC,AAAgB,EAAhB,KAAK,MAAM,IAElC,GAAI,AAA0B,IAA1B,EAAK,MAAM,CAAC,EAAI,CAAC,EAAI,CAAQ,CAC/B,EAAK,MAAM,CAAC,EAAI,CAAC,EAAI,CAAG,EACxB,KACF,CACF,CACF,CAEA,SAAS,EAAa,CAAK,CAAE,CAAU,EACrC,EAAM,SAAS,CAAC,MAAM,CAAC,SAAU,EACnC,CAEA,SAAS,EAAc,CAAM,EAG3B,IAAK,IAFC,EAAU,EAAE,CAET,EAAI,EAAG,EAAI,EAAO,MAAM,CAAE,IAAK,CACtC,EAAQ,IAAI,CAAC,EAAE,EAEf,IAAK,IAAI,EAAI,EAAG,EAAI,CAAM,CAAC,EAAE,CAAC,MAAM,CAAE,IACpC,CAAO,CAAC,EAAE,CAAC,IAAI,CAAC,CAAM,CAAC,EAAE,CAAC,EAAE,CAEhC,CAEA,OAAO,CACT,CAtHA,EAAS,gBAAgB,CAAC,QAAS,WACjC,EAAK,SAAS,CAAG,CAAA,EACjB,EAAK,KAAK,CAAG,CAAA,EACb,EAAK,KAAK,CAAG,EACb,EAAa,EAAU,EAAK,SAAS,EACrC,EAAa,EAAY,CAAC,EAAK,SAAS,EACxC,EAAa,EAAU,EAAK,SAAS,EACrC,EAAa,EAAQ,EAAK,SAAS,EACnC,IACA,IACA,IACA,GACF,GAEA,EAAW,gBAAgB,CAAC,QAAS,WACnC,EAAK,SAAS,CAAG,CAAA,EACjB,EAAK,MAAM,CAAG,CAAA,EACd,EAAK,KAAK,CAAG,EACb,EAAa,EAAS,CAAC,EAAK,MAAM,EAClC,IACA,IACA,IACA,GACF,GAEA,SAAS,gBAAgB,CAAC,UAAW,SAAA,CAArC,EACE,IAAM,EAAM,EAAE,GAAG,CAEjB,GAAI,AAAC,EAAI,UAAU,CAAC,UAAa,EAAK,SAAS,EAG/C,MAAM,cAAc,GAEpB,IA2GiB,EA3GX,EAAgB,EAAI,OAAO,CAAC,QAAS,QACpB,CAAe,CAAC,EAAc,CAAC,EAAK,MAAM,IAMjE,CAAK,CAAC,EAAc,CAAC,EAAK,MAAM,EAEhC,IACA,IAEI,AA2EN,SAAsB,CAAM,EACrB,IAAA,EAAA,CAAA,EAAA,EAAA,CAAA,EAAA,EAAA,KAAA,E,G,CAAL,IAAA,IAAK,EAAA,EAAa,CAAA,CAAA,OAAA,QAAA,CAAA,GAAb,CAAA,CAAA,EAAA,AAAA,CAAA,EAAA,EAAA,IAAA,EAAA,EAAA,IAAA,AAAA,EAAA,EAAA,CAAA,EAGH,GAFgB,AADb,EAAA,KAAA,CACiB,IAAI,CAAC,SAAA,CAAzB,EAAgC,OAAA,AAAQ,OAAR,C,GAG9B,MAAO,CAAA,C,C,M,E,CAJN,EAAA,CAAA,EAAA,EAAA,C,Q,C,G,CAAA,GAAA,AAAA,MAAA,EAAA,MAAA,EAAA,EAAA,MAAA,E,Q,CAAA,GAAA,EAAA,MAAA,C,C,CAQL,MAAO,CAAA,CACT,EArFmB,EAAK,MAAM,IAwF5B,EAAK,KAAK,CAAG,CAAA,EACb,EAAK,SAAS,CAAG,CAAA,EACjB,EAAa,EAAQ,CAAC,EAAK,KAAK,EAChC,EAAa,EAAY,CAAC,EAAK,SAAS,EACxC,EAAa,EAAU,EAAK,SAAS,GAGpB,EA3FH,EAAK,MAAM,CAmGL,AAPC,CACnB,EAAgB,QAAQ,CAAC,GACzB,EAAgB,SAAS,CAAC,GAC1B,EAAgB,MAAM,CAAC,GACvB,EAAgB,QAAQ,CAAC,GAC1B,CAEgC,IAAI,CAAC,SAAA,CAAtC,EAAiD,MAAA,AAAY,CAAA,IAAZ,C,KAMjD,EAAK,SAAS,CAAG,CAAA,EACjB,EAAK,MAAM,CAAG,CAAA,EACd,EAAa,EAAS,CAAC,EAAK,MAAM,IAxGpC,E","sources":["<anon>","src/scripts/main.js"],"sourcesContent":["(function () {\nvar $197cd56b15c33885$exports = {};\n\"use strict\";\nvar $197cd56b15c33885$var$controls = document.querySelector(\".controls\");\nvar $197cd56b15c33885$var$scoreInfo = document.querySelector(\".game-score\");\nvar $197cd56b15c33885$var$rows = document.querySelectorAll(\".field-row\");\nvar $197cd56b15c33885$var$msgStart = document.querySelector(\".message-start\");\nvar $197cd56b15c33885$var$msgWin = document.querySelector(\".message-win\");\nvar $197cd56b15c33885$var$msgLose = document.querySelector(\".message-lose\");\n$197cd56b15c33885$var$controls.insertAdjacentHTML(\"beforeend\", '\\n  <button\\n    class=\"button restart hidden\"\\n    >Restart\\n  </button>\\n');\nvar $197cd56b15c33885$var$startBtn = document.querySelector(\".start\");\nvar $197cd56b15c33885$var$restartBtn = document.querySelector(\".restart\");\nvar $197cd56b15c33885$var$game = {\n    isRunning: false,\n    isWon: false,\n    isLost: false,\n    score: 0,\n    rowsQty: $197cd56b15c33885$var$rows.length,\n    colsQty: $197cd56b15c33885$var$rows[0].children.length,\n    matrix: []\n};\nvar $197cd56b15c33885$var$moves = {\n    moveRight: function(matrix) {\n        matrix.forEach(function(row) {\n            row.forEach(function(num, index) {\n                if (num === 0) {\n                    row.splice(index, 1);\n                    row.unshift(0);\n                }\n            });\n            for(var i = row.length - 1; i >= 0; i--)if (row[i] > 0 && row[i] === row[i - 1]) {\n                var sum = row[i] * 2;\n                row.splice(i - 1, 2, sum);\n                row.unshift(0);\n                $197cd56b15c33885$var$game.score += sum;\n            }\n        });\n    },\n    moveLeft: function(matrix) {\n        matrix.forEach(function(row) {\n            for(var i = row.length - 1; i >= 0; i--)if (row[i] === 0) {\n                row.splice(i, 1);\n                row.push(0);\n            }\n            for(var i1 = 0; i1 < row.length; i1++)if (row[i1] > 0 && row[i1] === row[i1 + 1]) {\n                var sum = row[i1] * 2;\n                row.splice(i1, 2, sum);\n                row.push(0);\n                $197cd56b15c33885$var$game.score += sum;\n            }\n        });\n    },\n    moveUp: function(matrix) {\n        var reflectedMatrix = $197cd56b15c33885$var$reflectMatrix(matrix);\n        this.moveLeft(reflectedMatrix);\n        var shiftedUpMatrix = $197cd56b15c33885$var$reflectMatrix(reflectedMatrix);\n        $197cd56b15c33885$var$game.matrix = shiftedUpMatrix;\n    },\n    moveDown: function(matrix) {\n        var reflectedMatrix = $197cd56b15c33885$var$reflectMatrix(matrix);\n        this.moveRight(reflectedMatrix);\n        var shiftedDownMatrix = $197cd56b15c33885$var$reflectMatrix(reflectedMatrix);\n        $197cd56b15c33885$var$game.matrix = shiftedDownMatrix;\n    }\n};\nvar $197cd56b15c33885$var$checkDirections = {\n    moveLeft: function(matrix) {\n        for(var i = 0; i < matrix.length; i++){\n            var nums = matrix[i];\n            for(var n = 0; n < nums.length; n++){\n                if (nums[n] !== 0 && nums[n] === nums[n + 1]) return true;\n                var restHasNums = false;\n                if (nums[n] === 0) {\n                    var rest = nums.slice(n);\n                    restHasNums = rest.some(function(num) {\n                        return num > 0;\n                    });\n                }\n                if (restHasNums) return true;\n            }\n        }\n        return false;\n    },\n    moveRight: function(matrix) {\n        for(var i = 0; i < matrix.length; i++){\n            var nums = matrix[i];\n            for(var n = nums.length; n >= 0; n--){\n                if (nums[n] !== 0 && nums[n] === nums[n - 1]) return true;\n                var restHasNums = false;\n                if (nums[n] === 0) {\n                    var rest = nums.slice(0, n);\n                    restHasNums = rest.some(function(num) {\n                        return num > 0;\n                    });\n                }\n                if (restHasNums) return true;\n            }\n        }\n        return false;\n    },\n    moveUp: function(matrix) {\n        var reflectedMatrix = $197cd56b15c33885$var$reflectMatrix(matrix);\n        return this.moveLeft(reflectedMatrix);\n    },\n    moveDown: function(matrix) {\n        var reflectedMatrix = $197cd56b15c33885$var$reflectMatrix(matrix);\n        return this.moveRight(reflectedMatrix);\n    }\n};\n$197cd56b15c33885$var$startBtn.addEventListener(\"click\", function() {\n    $197cd56b15c33885$var$game.isRunning = true;\n    $197cd56b15c33885$var$game.isWon = false;\n    $197cd56b15c33885$var$game.score = 0;\n    $197cd56b15c33885$var$toggleHidden($197cd56b15c33885$var$startBtn, $197cd56b15c33885$var$game.isRunning);\n    $197cd56b15c33885$var$toggleHidden($197cd56b15c33885$var$restartBtn, !$197cd56b15c33885$var$game.isRunning);\n    $197cd56b15c33885$var$toggleHidden($197cd56b15c33885$var$msgStart, $197cd56b15c33885$var$game.isRunning);\n    $197cd56b15c33885$var$toggleHidden($197cd56b15c33885$var$msgWin, $197cd56b15c33885$var$game.isRunning);\n    $197cd56b15c33885$var$createMatrix();\n    $197cd56b15c33885$var$addNum();\n    $197cd56b15c33885$var$addNum();\n    $197cd56b15c33885$var$renderNums();\n});\n$197cd56b15c33885$var$restartBtn.addEventListener(\"click\", function() {\n    $197cd56b15c33885$var$game.isRunning = true;\n    $197cd56b15c33885$var$game.isLost = false;\n    $197cd56b15c33885$var$game.score = 0;\n    $197cd56b15c33885$var$toggleHidden($197cd56b15c33885$var$msgLose, !$197cd56b15c33885$var$game.isLost);\n    $197cd56b15c33885$var$createMatrix();\n    $197cd56b15c33885$var$addNum();\n    $197cd56b15c33885$var$addNum();\n    $197cd56b15c33885$var$renderNums();\n});\ndocument.addEventListener(\"keydown\", function(e) {\n    var key = e.key;\n    if (!key.startsWith(\"Arrow\") || !$197cd56b15c33885$var$game.isRunning) return;\n    event.preventDefault();\n    var moveDirection = key.replace(\"Arrow\", \"move\");\n    var moveIsPossible = $197cd56b15c33885$var$checkDirections[moveDirection]($197cd56b15c33885$var$game.matrix);\n    if (!moveIsPossible) return;\n    $197cd56b15c33885$var$moves[moveDirection]($197cd56b15c33885$var$game.matrix);\n    $197cd56b15c33885$var$addNum();\n    $197cd56b15c33885$var$renderNums();\n    if ($197cd56b15c33885$var$checkVictory($197cd56b15c33885$var$game.matrix)) $197cd56b15c33885$var$processVictory();\n    if ($197cd56b15c33885$var$checkLose($197cd56b15c33885$var$game.matrix)) $197cd56b15c33885$var$processLose();\n});\nfunction $197cd56b15c33885$var$createMatrix() {\n    var matrix = [];\n    for(var i = 0; i < $197cd56b15c33885$var$game.rowsQty; i++){\n        matrix.push([]);\n        for(var n = 0; n < $197cd56b15c33885$var$game.colsQty; n++)matrix[i][n] = 0;\n    }\n    $197cd56b15c33885$var$game.matrix = matrix;\n}\nfunction $197cd56b15c33885$var$renderNums() {\n    var _loop = function(rowIndex) {\n        var row = $197cd56b15c33885$var$game.matrix[rowIndex];\n        row.forEach(function(cellValue, cellIndex) {\n            var renderedCell = $197cd56b15c33885$var$rows[rowIndex].children[cellIndex];\n            renderedCell.className = \"field-cell\";\n            renderedCell.textContent = \"\";\n            if (cellValue !== 0) {\n                renderedCell.classList.add(\"field-cell--\" + cellValue);\n                renderedCell.textContent = cellValue;\n            }\n        });\n    };\n    for(var rowIndex = 0; rowIndex < $197cd56b15c33885$var$game.matrix.length; rowIndex++)_loop(rowIndex);\n    $197cd56b15c33885$var$scoreInfo.textContent = $197cd56b15c33885$var$game.score;\n}\nfunction $197cd56b15c33885$var$addNum() {\n    var num = Math.random() > 0.1 ? 2 : 4;\n    for(;;){\n        var row = Math.floor(Math.random() * 4);\n        var col = Math.floor(Math.random() * 4);\n        if ($197cd56b15c33885$var$game.matrix[row][col] === 0) {\n            $197cd56b15c33885$var$game.matrix[row][col] = num;\n            break;\n        }\n    }\n}\nfunction $197cd56b15c33885$var$toggleHidden(block, dependence) {\n    block.classList.toggle(\"hidden\", dependence);\n}\nfunction $197cd56b15c33885$var$reflectMatrix(matrix) {\n    var columns = [];\n    for(var i = 0; i < matrix.length; i++){\n        columns.push([]);\n        for(var n = 0; n < matrix[i].length; n++)columns[i].push(matrix[n][i]);\n    }\n    return columns;\n}\nfunction $197cd56b15c33885$var$checkVictory(matrix) {\n    var _iteratorNormalCompletion = true, _didIteratorError = false, _iteratorError = undefined;\n    try {\n        for(var _iterator = matrix[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true){\n            var row = _step.value;\n            var has2048 = row.some(function(num) {\n                return num === 2048;\n            });\n            if (has2048) return true;\n        }\n    } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n    } finally{\n        try {\n            if (!_iteratorNormalCompletion && _iterator.return != null) {\n                _iterator.return();\n            }\n        } finally{\n            if (_didIteratorError) {\n                throw _iteratorError;\n            }\n        }\n    }\n    return false;\n}\nfunction $197cd56b15c33885$var$processVictory() {\n    $197cd56b15c33885$var$game.isWon = true;\n    $197cd56b15c33885$var$game.isRunning = false;\n    $197cd56b15c33885$var$toggleHidden($197cd56b15c33885$var$msgWin, !$197cd56b15c33885$var$game.isWon);\n    $197cd56b15c33885$var$toggleHidden($197cd56b15c33885$var$restartBtn, !$197cd56b15c33885$var$game.isRunning);\n    $197cd56b15c33885$var$toggleHidden($197cd56b15c33885$var$startBtn, $197cd56b15c33885$var$game.isRunning);\n}\nfunction $197cd56b15c33885$var$checkLose(matrix) {\n    var moveVariants = [\n        $197cd56b15c33885$var$checkDirections.moveLeft(matrix),\n        $197cd56b15c33885$var$checkDirections.moveRight(matrix),\n        $197cd56b15c33885$var$checkDirections.moveUp(matrix),\n        $197cd56b15c33885$var$checkDirections.moveDown(matrix)\n    ];\n    var checkResult = moveVariants.some(function(variant) {\n        return variant === true;\n    });\n    return !checkResult;\n}\nfunction $197cd56b15c33885$var$processLose() {\n    $197cd56b15c33885$var$game.isRunning = false;\n    $197cd56b15c33885$var$game.isLost = true;\n    $197cd56b15c33885$var$toggleHidden($197cd56b15c33885$var$msgLose, !$197cd56b15c33885$var$game.isLost);\n}\n\n})();\n//# sourceMappingURL=index.02575b9c.js.map\n","'use strict';\n\nconst controls = document.querySelector('.controls');\nconst scoreInfo = document.querySelector('.game-score');\n\nconst rows = document.querySelectorAll('.field-row');\n\nconst msgStart = document.querySelector('.message-start');\nconst msgWin = document.querySelector('.message-win');\nconst msgLose = document.querySelector('.message-lose');\n\ncontrols.insertAdjacentHTML('beforeend', `\n  <button\n    class=\"button restart hidden\"\n    >Restart\n  </button>\n`);\n\nconst startBtn = document.querySelector('.start');\nconst restartBtn = document.querySelector('.restart');\n\nconst game = {\n  isRunning: false,\n  isWon: false,\n  isLost: false,\n  score: 0,\n  rowsQty: rows.length,\n  colsQty: rows[0].children.length,\n  matrix: [],\n};\n\nconst moves = {\n  moveRight(matrix) {\n    matrix.forEach(row => {\n      row.forEach((num, index) => {\n        if (num === 0) {\n          row.splice(index, 1);\n          row.unshift(0);\n        }\n      });\n\n      for (let i = row.length - 1; i >= 0; i--) {\n        if (row[i] > 0 && row[i] === row[i - 1]) {\n          const sum = row[i] * 2;\n\n          row.splice(i - 1, 2, sum);\n          row.unshift(0);\n          game.score += sum;\n        }\n      }\n    });\n  },\n\n  moveLeft(matrix) {\n    matrix.forEach(row => {\n      for (let i = row.length - 1; i >= 0; i--) {\n        if (row[i] === 0) {\n          row.splice(i, 1);\n          row.push(0);\n        }\n      }\n\n      for (let i = 0; i < row.length; i++) {\n        if (row[i] > 0 && row[i] === row[i + 1]) {\n          const sum = row[i] * 2;\n\n          row.splice(i, 2, sum);\n          row.push(0);\n          game.score += sum;\n        }\n      }\n    });\n  },\n\n  moveUp(matrix) {\n    const reflectedMatrix = reflectMatrix(matrix);\n\n    this.moveLeft(reflectedMatrix);\n\n    const shiftedUpMatrix = reflectMatrix(reflectedMatrix);\n\n    game.matrix = shiftedUpMatrix;\n  },\n\n  moveDown(matrix) {\n    const reflectedMatrix = reflectMatrix(matrix);\n\n    this.moveRight(reflectedMatrix);\n\n    const shiftedDownMatrix = reflectMatrix(reflectedMatrix);\n\n    game.matrix = shiftedDownMatrix;\n  },\n};\n\nconst checkDirections = {\n  moveLeft(matrix) {\n    for (let i = 0; i < matrix.length; i++) {\n      const nums = matrix[i];\n\n      for (let n = 0; n < nums.length; n++) {\n        if (nums[n] !== 0 && nums[n] === nums[n + 1]) {\n          return true;\n        }\n\n        let restHasNums = false;\n\n        if (nums[n] === 0) {\n          const rest = nums.slice(n);\n\n          restHasNums = rest.some(num => num > 0);\n        }\n\n        if (restHasNums) {\n          return true;\n        }\n      }\n    }\n\n    return false;\n  },\n\n  moveRight(matrix) {\n    for (let i = 0; i < matrix.length; i++) {\n      const nums = matrix[i];\n\n      for (let n = nums.length; n >= 0; n--) {\n        if (nums[n] !== 0 && nums[n] === nums[n - 1]) {\n          return true;\n        }\n\n        let restHasNums = false;\n\n        if (nums[n] === 0) {\n          const rest = nums.slice(0, n);\n\n          restHasNums = rest.some(num => num > 0);\n        }\n\n        if (restHasNums) {\n          return true;\n        }\n      }\n    }\n\n    return false;\n  },\n\n  moveUp(matrix) {\n    const reflectedMatrix = reflectMatrix(matrix);\n\n    return this.moveLeft(reflectedMatrix);\n  },\n\n  moveDown(matrix) {\n    const reflectedMatrix = reflectMatrix(matrix);\n\n    return this.moveRight(reflectedMatrix);\n  },\n};\n\nstartBtn.addEventListener('click', () => {\n  game.isRunning = true;\n  game.isWon = false;\n  game.score = 0;\n  toggleHidden(startBtn, game.isRunning);\n  toggleHidden(restartBtn, !game.isRunning);\n  toggleHidden(msgStart, game.isRunning);\n  toggleHidden(msgWin, game.isRunning);\n  createMatrix();\n  addNum();\n  addNum();\n  renderNums();\n});\n\nrestartBtn.addEventListener('click', () => {\n  game.isRunning = true;\n  game.isLost = false;\n  game.score = 0;\n  toggleHidden(msgLose, !game.isLost);\n  createMatrix();\n  addNum();\n  addNum();\n  renderNums();\n});\n\ndocument.addEventListener('keydown', e => {\n  const key = e.key;\n\n  if (!key.startsWith('Arrow') || !game.isRunning) {\n    return;\n  }\n  event.preventDefault();\n\n  const moveDirection = key.replace('Arrow', 'move');\n  const moveIsPossible = checkDirections[moveDirection](game.matrix);\n\n  if (!moveIsPossible) {\n    return;\n  }\n\n  moves[moveDirection](game.matrix);\n\n  addNum();\n  renderNums();\n\n  if (checkVictory(game.matrix)) {\n    processVictory();\n  }\n\n  if (checkLose(game.matrix)) {\n    processLose();\n  }\n});\n\nfunction createMatrix() {\n  const matrix = [];\n\n  for (let i = 0; i < game.rowsQty; i++) {\n    matrix.push([]);\n\n    for (let n = 0; n < game.colsQty; n++) {\n      matrix[i][n] = 0;\n    }\n  }\n\n  game.matrix = matrix;\n}\n\nfunction renderNums() {\n  for (let rowIndex = 0; rowIndex < game.matrix.length; rowIndex++) {\n    const row = game.matrix[rowIndex];\n\n    row.forEach((cellValue, cellIndex) => {\n      const renderedCell = rows[rowIndex].children[cellIndex];\n\n      renderedCell.className = 'field-cell';\n      renderedCell.textContent = '';\n\n      if (cellValue !== 0) {\n        renderedCell.classList.add('field-cell--' + cellValue);\n        renderedCell.textContent = cellValue;\n      }\n    });\n  }\n\n  scoreInfo.textContent = game.score;\n}\n\nfunction addNum() {\n  const num = Math.random() > 0.1 ? 2 : 4;\n\n  for (;;) {\n    const row = Math.floor(Math.random() * 4);\n    const col = Math.floor(Math.random() * 4);\n\n    if (game.matrix[row][col] === 0) {\n      game.matrix[row][col] = num;\n      break;\n    }\n  }\n}\n\nfunction toggleHidden(block, dependence) {\n  block.classList.toggle('hidden', dependence);\n}\n\nfunction reflectMatrix(matrix) {\n  const columns = [];\n\n  for (let i = 0; i < matrix.length; i++) {\n    columns.push([]);\n\n    for (let n = 0; n < matrix[i].length; n++) {\n      columns[i].push(matrix[n][i]);\n    }\n  }\n\n  return columns;\n}\n\nfunction checkVictory(matrix) {\n  for (const row of matrix) {\n    const has2048 = row.some(num => num === 2048);\n\n    if (has2048) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction processVictory() {\n  game.isWon = true;\n  game.isRunning = false;\n  toggleHidden(msgWin, !game.isWon);\n  toggleHidden(restartBtn, !game.isRunning);\n  toggleHidden(startBtn, game.isRunning);\n}\n\nfunction checkLose(matrix) {\n  const moveVariants = [\n    checkDirections.moveLeft(matrix),\n    checkDirections.moveRight(matrix),\n    checkDirections.moveUp(matrix),\n    checkDirections.moveDown(matrix),\n  ];\n\n  const checkResult = moveVariants.some(variant => variant === true);\n\n  return !checkResult;\n}\n\nfunction processLose() {\n  game.isRunning = false;\n  game.isLost = true;\n  toggleHidden(msgLose, !game.isLost);\n}\n"],"names":["$197cd56b15c33885$var$controls","document","querySelector","$197cd56b15c33885$var$scoreInfo","$197cd56b15c33885$var$rows","querySelectorAll","$197cd56b15c33885$var$msgStart","$197cd56b15c33885$var$msgWin","$197cd56b15c33885$var$msgLose","insertAdjacentHTML","$197cd56b15c33885$var$startBtn","$197cd56b15c33885$var$restartBtn","$197cd56b15c33885$var$game","isRunning","isWon","isLost","score","rowsQty","length","colsQty","children","matrix","$197cd56b15c33885$var$moves","moveRight","forEach","row","num","index","splice","unshift","i","sum","moveLeft","push","i1","moveUp","reflectedMatrix","$197cd56b15c33885$var$reflectMatrix","shiftedUpMatrix","moveDown","shiftedDownMatrix","$197cd56b15c33885$var$checkDirections","nums","n","restHasNums","rest","slice","some","$197cd56b15c33885$var$createMatrix","$197cd56b15c33885$var$renderNums","_loop","rowIndex","cellValue","cellIndex","renderedCell","className","textContent","classList","add","$197cd56b15c33885$var$addNum","Math","random","floor","col","$197cd56b15c33885$var$toggleHidden","block","dependence","toggle","columns","addEventListener","e","key","startsWith","event","preventDefault","moveDirection","replace","$197cd56b15c33885$var$checkVictory","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","value","err","return","moveVariants","variant"],"version":3,"file":"index.02575b9c.js.map"}