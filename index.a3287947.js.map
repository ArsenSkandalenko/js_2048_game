{"mappings":"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","sources":["<anon>","src/scripts/main.js"],"sourcesContent":["var $09e991522ca7e64e$exports = {};\n\"use strict\";\nconst $09e991522ca7e64e$var$controls = document.querySelector(\".controls\");\nconst $09e991522ca7e64e$var$scoreInfo = document.querySelector(\".game-score\");\nconst $09e991522ca7e64e$var$rows = document.querySelectorAll(\".field-row\");\nconst $09e991522ca7e64e$var$msgStart = document.querySelector(\".message-start\");\nconst $09e991522ca7e64e$var$msgWin = document.querySelector(\".message-win\");\nconst $09e991522ca7e64e$var$msgLose = document.querySelector(\".message-lose\");\n$09e991522ca7e64e$var$controls.insertAdjacentHTML(\"beforeend\", `\n  <button\n    class=\"button restart hidden\"\n    >Restart\n  </button>\n`);\nconst $09e991522ca7e64e$var$startBtn = document.querySelector(\".start\");\nconst $09e991522ca7e64e$var$restartBtn = document.querySelector(\".restart\");\nconst $09e991522ca7e64e$var$game = {\n    isRunning: false,\n    isWon: false,\n    isLost: false,\n    score: 0,\n    rowsQty: $09e991522ca7e64e$var$rows.length,\n    colsQty: $09e991522ca7e64e$var$rows[0].children.length,\n    matrix: []\n};\nconst $09e991522ca7e64e$var$moves = {\n    moveRight (matrix) {\n        matrix.forEach((row)=>{\n            row.forEach((num, index)=>{\n                if (num === 0) {\n                    row.splice(index, 1);\n                    row.unshift(0);\n                }\n            });\n            for(let i = row.length - 1; i >= 0; i--)if (row[i] > 0 && row[i] === row[i - 1]) {\n                const sum = row[i] * 2;\n                row.splice(i - 1, 2, sum);\n                row.unshift(0);\n                $09e991522ca7e64e$var$game.score += sum;\n            }\n        });\n    },\n    moveLeft (matrix) {\n        matrix.forEach((row)=>{\n            for(let i = row.length - 1; i >= 0; i--)if (row[i] === 0) {\n                row.splice(i, 1);\n                row.push(0);\n            }\n            for(let i = 0; i < row.length; i++)if (row[i] > 0 && row[i] === row[i + 1]) {\n                const sum = row[i] * 2;\n                row.splice(i, 2, sum);\n                row.push(0);\n                $09e991522ca7e64e$var$game.score += sum;\n            }\n        });\n    },\n    moveUp (matrix) {\n        const reflectedMatrix = $09e991522ca7e64e$var$reflectMatrix(matrix);\n        this.moveLeft(reflectedMatrix);\n        const shiftedUpMatrix = $09e991522ca7e64e$var$reflectMatrix(reflectedMatrix);\n        $09e991522ca7e64e$var$game.matrix = shiftedUpMatrix;\n    },\n    moveDown (matrix) {\n        const reflectedMatrix = $09e991522ca7e64e$var$reflectMatrix(matrix);\n        this.moveRight(reflectedMatrix);\n        const shiftedDownMatrix = $09e991522ca7e64e$var$reflectMatrix(reflectedMatrix);\n        $09e991522ca7e64e$var$game.matrix = shiftedDownMatrix;\n    }\n};\nconst $09e991522ca7e64e$var$checkDirections = {\n    moveLeft (matrix) {\n        for(let i = 0; i < matrix.length; i++){\n            const nums = matrix[i];\n            for(let n = 0; n < nums.length; n++){\n                if (nums[n] !== 0 && nums[n] === nums[n + 1]) return true;\n                let restHasNums = false;\n                if (nums[n] === 0) {\n                    const rest = nums.slice(n);\n                    restHasNums = rest.some((num)=>num > 0);\n                }\n                if (restHasNums) return true;\n            }\n        }\n        return false;\n    },\n    moveRight (matrix) {\n        for(let i = 0; i < matrix.length; i++){\n            const nums = matrix[i];\n            for(let n = nums.length; n >= 0; n--){\n                if (nums[n] !== 0 && nums[n] === nums[n - 1]) return true;\n                let restHasNums = false;\n                if (nums[n] === 0) {\n                    const rest = nums.slice(0, n);\n                    restHasNums = rest.some((num)=>num > 0);\n                }\n                if (restHasNums) return true;\n            }\n        }\n        return false;\n    },\n    moveUp (matrix) {\n        const reflectedMatrix = $09e991522ca7e64e$var$reflectMatrix(matrix);\n        return this.moveLeft(reflectedMatrix);\n    },\n    moveDown (matrix) {\n        const reflectedMatrix = $09e991522ca7e64e$var$reflectMatrix(matrix);\n        return this.moveRight(reflectedMatrix);\n    }\n};\n$09e991522ca7e64e$var$startBtn.addEventListener(\"click\", ()=>{\n    $09e991522ca7e64e$var$game.isRunning = true;\n    $09e991522ca7e64e$var$game.isWon = false;\n    $09e991522ca7e64e$var$game.score = 0;\n    $09e991522ca7e64e$var$toggleHidden($09e991522ca7e64e$var$startBtn, $09e991522ca7e64e$var$game.isRunning);\n    $09e991522ca7e64e$var$toggleHidden($09e991522ca7e64e$var$restartBtn, !$09e991522ca7e64e$var$game.isRunning);\n    $09e991522ca7e64e$var$toggleHidden($09e991522ca7e64e$var$msgStart, $09e991522ca7e64e$var$game.isRunning);\n    $09e991522ca7e64e$var$toggleHidden($09e991522ca7e64e$var$msgWin, $09e991522ca7e64e$var$game.isRunning);\n    $09e991522ca7e64e$var$createMatrix();\n    $09e991522ca7e64e$var$addNum();\n    $09e991522ca7e64e$var$addNum();\n    $09e991522ca7e64e$var$renderNums();\n});\n$09e991522ca7e64e$var$restartBtn.addEventListener(\"click\", ()=>{\n    $09e991522ca7e64e$var$game.isRunning = true;\n    $09e991522ca7e64e$var$game.isLost = false;\n    $09e991522ca7e64e$var$game.score = 0;\n    $09e991522ca7e64e$var$toggleHidden($09e991522ca7e64e$var$msgLose, !$09e991522ca7e64e$var$game.isLost);\n    $09e991522ca7e64e$var$createMatrix();\n    $09e991522ca7e64e$var$addNum();\n    $09e991522ca7e64e$var$addNum();\n    $09e991522ca7e64e$var$renderNums();\n});\ndocument.addEventListener(\"keydown\", (e)=>{\n    const key = e.key;\n    if (!key.startsWith(\"Arrow\") || !$09e991522ca7e64e$var$game.isRunning) return;\n    event.preventDefault();\n    const moveDirection = key.replace(\"Arrow\", \"move\");\n    const moveIsPossible = $09e991522ca7e64e$var$checkDirections[moveDirection]($09e991522ca7e64e$var$game.matrix);\n    if (!moveIsPossible) return;\n    $09e991522ca7e64e$var$moves[moveDirection]($09e991522ca7e64e$var$game.matrix);\n    $09e991522ca7e64e$var$addNum();\n    $09e991522ca7e64e$var$renderNums();\n    if ($09e991522ca7e64e$var$checkVictory($09e991522ca7e64e$var$game.matrix)) $09e991522ca7e64e$var$processVictory();\n    if ($09e991522ca7e64e$var$checkLose($09e991522ca7e64e$var$game.matrix)) $09e991522ca7e64e$var$processLose();\n});\nfunction $09e991522ca7e64e$var$createMatrix() {\n    const matrix = [];\n    for(let i = 0; i < $09e991522ca7e64e$var$game.rowsQty; i++){\n        matrix.push([]);\n        for(let n = 0; n < $09e991522ca7e64e$var$game.colsQty; n++)matrix[i][n] = 0;\n    }\n    $09e991522ca7e64e$var$game.matrix = matrix;\n}\nfunction $09e991522ca7e64e$var$renderNums() {\n    for(let rowIndex = 0; rowIndex < $09e991522ca7e64e$var$game.matrix.length; rowIndex++){\n        const row = $09e991522ca7e64e$var$game.matrix[rowIndex];\n        row.forEach((cellValue, cellIndex)=>{\n            const renderedCell = $09e991522ca7e64e$var$rows[rowIndex].children[cellIndex];\n            renderedCell.className = \"field-cell\";\n            renderedCell.textContent = \"\";\n            if (cellValue !== 0) {\n                renderedCell.classList.add(\"field-cell--\" + cellValue);\n                renderedCell.textContent = cellValue;\n            }\n        });\n    }\n    $09e991522ca7e64e$var$scoreInfo.textContent = $09e991522ca7e64e$var$game.score;\n}\nfunction $09e991522ca7e64e$var$addNum() {\n    const num = Math.random() > 0.1 ? 2 : 4;\n    for(;;){\n        const row = Math.floor(Math.random() * 4);\n        const col = Math.floor(Math.random() * 4);\n        if ($09e991522ca7e64e$var$game.matrix[row][col] === 0) {\n            $09e991522ca7e64e$var$game.matrix[row][col] = num;\n            break;\n        }\n    }\n}\nfunction $09e991522ca7e64e$var$toggleHidden(block, dependence) {\n    block.classList.toggle(\"hidden\", dependence);\n}\nfunction $09e991522ca7e64e$var$reflectMatrix(matrix) {\n    const columns = [];\n    for(let i = 0; i < matrix.length; i++){\n        columns.push([]);\n        for(let n = 0; n < matrix[i].length; n++)columns[i].push(matrix[n][i]);\n    }\n    return columns;\n}\nfunction $09e991522ca7e64e$var$checkVictory(matrix) {\n    for (const row of matrix){\n        const has2048 = row.some((num)=>num === 2048);\n        if (has2048) return true;\n    }\n    return false;\n}\nfunction $09e991522ca7e64e$var$processVictory() {\n    $09e991522ca7e64e$var$game.isWon = true;\n    $09e991522ca7e64e$var$game.isRunning = false;\n    $09e991522ca7e64e$var$toggleHidden($09e991522ca7e64e$var$msgWin, !$09e991522ca7e64e$var$game.isWon);\n    $09e991522ca7e64e$var$toggleHidden($09e991522ca7e64e$var$restartBtn, !$09e991522ca7e64e$var$game.isRunning);\n    $09e991522ca7e64e$var$toggleHidden($09e991522ca7e64e$var$startBtn, $09e991522ca7e64e$var$game.isRunning);\n}\nfunction $09e991522ca7e64e$var$checkLose(matrix) {\n    const moveVariants = [\n        $09e991522ca7e64e$var$checkDirections.moveLeft(matrix),\n        $09e991522ca7e64e$var$checkDirections.moveRight(matrix),\n        $09e991522ca7e64e$var$checkDirections.moveUp(matrix),\n        $09e991522ca7e64e$var$checkDirections.moveDown(matrix)\n    ];\n    const checkResult = moveVariants.some((variant)=>variant === true);\n    return !checkResult;\n}\nfunction $09e991522ca7e64e$var$processLose() {\n    $09e991522ca7e64e$var$game.isRunning = false;\n    $09e991522ca7e64e$var$game.isLost = true;\n    $09e991522ca7e64e$var$toggleHidden($09e991522ca7e64e$var$msgLose, !$09e991522ca7e64e$var$game.isLost);\n}\n\n\n//# sourceMappingURL=index.a3287947.js.map\n","'use strict';\n\nconst controls = document.querySelector('.controls');\nconst scoreInfo = document.querySelector('.game-score');\n\nconst rows = document.querySelectorAll('.field-row');\n\nconst msgStart = document.querySelector('.message-start');\nconst msgWin = document.querySelector('.message-win');\nconst msgLose = document.querySelector('.message-lose');\n\ncontrols.insertAdjacentHTML('beforeend', `\n  <button\n    class=\"button restart hidden\"\n    >Restart\n  </button>\n`);\n\nconst startBtn = document.querySelector('.start');\nconst restartBtn = document.querySelector('.restart');\n\nconst game = {\n  isRunning: false,\n  isWon: false,\n  isLost: false,\n  score: 0,\n  rowsQty: rows.length,\n  colsQty: rows[0].children.length,\n  matrix: [],\n};\n\nconst moves = {\n  moveRight(matrix) {\n    matrix.forEach(row => {\n      row.forEach((num, index) => {\n        if (num === 0) {\n          row.splice(index, 1);\n          row.unshift(0);\n        }\n      });\n\n      for (let i = row.length - 1; i >= 0; i--) {\n        if (row[i] > 0 && row[i] === row[i - 1]) {\n          const sum = row[i] * 2;\n\n          row.splice(i - 1, 2, sum);\n          row.unshift(0);\n          game.score += sum;\n        }\n      }\n    });\n  },\n\n  moveLeft(matrix) {\n    matrix.forEach(row => {\n      for (let i = row.length - 1; i >= 0; i--) {\n        if (row[i] === 0) {\n          row.splice(i, 1);\n          row.push(0);\n        }\n      }\n\n      for (let i = 0; i < row.length; i++) {\n        if (row[i] > 0 && row[i] === row[i + 1]) {\n          const sum = row[i] * 2;\n\n          row.splice(i, 2, sum);\n          row.push(0);\n          game.score += sum;\n        }\n      }\n    });\n  },\n\n  moveUp(matrix) {\n    const reflectedMatrix = reflectMatrix(matrix);\n\n    this.moveLeft(reflectedMatrix);\n\n    const shiftedUpMatrix = reflectMatrix(reflectedMatrix);\n\n    game.matrix = shiftedUpMatrix;\n  },\n\n  moveDown(matrix) {\n    const reflectedMatrix = reflectMatrix(matrix);\n\n    this.moveRight(reflectedMatrix);\n\n    const shiftedDownMatrix = reflectMatrix(reflectedMatrix);\n\n    game.matrix = shiftedDownMatrix;\n  },\n};\n\nconst checkDirections = {\n  moveLeft(matrix) {\n    for (let i = 0; i < matrix.length; i++) {\n      const nums = matrix[i];\n\n      for (let n = 0; n < nums.length; n++) {\n        if (nums[n] !== 0 && nums[n] === nums[n + 1]) {\n          return true;\n        }\n\n        let restHasNums = false;\n\n        if (nums[n] === 0) {\n          const rest = nums.slice(n);\n\n          restHasNums = rest.some(num => num > 0);\n        }\n\n        if (restHasNums) {\n          return true;\n        }\n      }\n    }\n\n    return false;\n  },\n\n  moveRight(matrix) {\n    for (let i = 0; i < matrix.length; i++) {\n      const nums = matrix[i];\n\n      for (let n = nums.length; n >= 0; n--) {\n        if (nums[n] !== 0 && nums[n] === nums[n - 1]) {\n          return true;\n        }\n\n        let restHasNums = false;\n\n        if (nums[n] === 0) {\n          const rest = nums.slice(0, n);\n\n          restHasNums = rest.some(num => num > 0);\n        }\n\n        if (restHasNums) {\n          return true;\n        }\n      }\n    }\n\n    return false;\n  },\n\n  moveUp(matrix) {\n    const reflectedMatrix = reflectMatrix(matrix);\n\n    return this.moveLeft(reflectedMatrix);\n  },\n\n  moveDown(matrix) {\n    const reflectedMatrix = reflectMatrix(matrix);\n\n    return this.moveRight(reflectedMatrix);\n  },\n};\n\nstartBtn.addEventListener('click', () => {\n  game.isRunning = true;\n  game.isWon = false;\n  game.score = 0;\n  toggleHidden(startBtn, game.isRunning);\n  toggleHidden(restartBtn, !game.isRunning);\n  toggleHidden(msgStart, game.isRunning);\n  toggleHidden(msgWin, game.isRunning);\n  createMatrix();\n  addNum();\n  addNum();\n  renderNums();\n});\n\nrestartBtn.addEventListener('click', () => {\n  game.isRunning = true;\n  game.isLost = false;\n  game.score = 0;\n  toggleHidden(msgLose, !game.isLost);\n  createMatrix();\n  addNum();\n  addNum();\n  renderNums();\n});\n\ndocument.addEventListener('keydown', e => {\n  const key = e.key;\n\n  if (!key.startsWith('Arrow') || !game.isRunning) {\n    return;\n  }\n  event.preventDefault();\n\n  const moveDirection = key.replace('Arrow', 'move');\n  const moveIsPossible = checkDirections[moveDirection](game.matrix);\n\n  if (!moveIsPossible) {\n    return;\n  }\n\n  moves[moveDirection](game.matrix);\n\n  addNum();\n  renderNums();\n\n  if (checkVictory(game.matrix)) {\n    processVictory();\n  }\n\n  if (checkLose(game.matrix)) {\n    processLose();\n  }\n});\n\nfunction createMatrix() {\n  const matrix = [];\n\n  for (let i = 0; i < game.rowsQty; i++) {\n    matrix.push([]);\n\n    for (let n = 0; n < game.colsQty; n++) {\n      matrix[i][n] = 0;\n    }\n  }\n\n  game.matrix = matrix;\n}\n\nfunction renderNums() {\n  for (let rowIndex = 0; rowIndex < game.matrix.length; rowIndex++) {\n    const row = game.matrix[rowIndex];\n\n    row.forEach((cellValue, cellIndex) => {\n      const renderedCell = rows[rowIndex].children[cellIndex];\n\n      renderedCell.className = 'field-cell';\n      renderedCell.textContent = '';\n\n      if (cellValue !== 0) {\n        renderedCell.classList.add('field-cell--' + cellValue);\n        renderedCell.textContent = cellValue;\n      }\n    });\n  }\n\n  scoreInfo.textContent = game.score;\n}\n\nfunction addNum() {\n  const num = Math.random() > 0.1 ? 2 : 4;\n\n  for (;;) {\n    const row = Math.floor(Math.random() * 4);\n    const col = Math.floor(Math.random() * 4);\n\n    if (game.matrix[row][col] === 0) {\n      game.matrix[row][col] = num;\n      break;\n    }\n  }\n}\n\nfunction toggleHidden(block, dependence) {\n  block.classList.toggle('hidden', dependence);\n}\n\nfunction reflectMatrix(matrix) {\n  const columns = [];\n\n  for (let i = 0; i < matrix.length; i++) {\n    columns.push([]);\n\n    for (let n = 0; n < matrix[i].length; n++) {\n      columns[i].push(matrix[n][i]);\n    }\n  }\n\n  return columns;\n}\n\nfunction checkVictory(matrix) {\n  for (const row of matrix) {\n    const has2048 = row.some(num => num === 2048);\n\n    if (has2048) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction processVictory() {\n  game.isWon = true;\n  game.isRunning = false;\n  toggleHidden(msgWin, !game.isWon);\n  toggleHidden(restartBtn, !game.isRunning);\n  toggleHidden(startBtn, game.isRunning);\n}\n\nfunction checkLose(matrix) {\n  const moveVariants = [\n    checkDirections.moveLeft(matrix),\n    checkDirections.moveRight(matrix),\n    checkDirections.moveUp(matrix),\n    checkDirections.moveDown(matrix),\n  ];\n\n  const checkResult = moveVariants.some(variant => variant === true);\n\n  return !checkResult;\n}\n\nfunction processLose() {\n  game.isRunning = false;\n  game.isLost = true;\n  toggleHidden(msgLose, !game.isLost);\n}\n"],"names":["$09e991522ca7e64e$var$controls","document","querySelector","$09e991522ca7e64e$var$scoreInfo","$09e991522ca7e64e$var$rows","querySelectorAll","$09e991522ca7e64e$var$msgStart","$09e991522ca7e64e$var$msgWin","$09e991522ca7e64e$var$msgLose","insertAdjacentHTML","$09e991522ca7e64e$var$startBtn","$09e991522ca7e64e$var$restartBtn","$09e991522ca7e64e$var$game","isRunning","isWon","isLost","score","rowsQty","length","colsQty","children","matrix","$09e991522ca7e64e$var$moves","moveRight","forEach","row","num","index","splice","unshift","i","sum","moveLeft","push","moveUp","reflectedMatrix","$09e991522ca7e64e$var$reflectMatrix","shiftedUpMatrix","moveDown","shiftedDownMatrix","$09e991522ca7e64e$var$checkDirections","nums","n","restHasNums","rest","slice","some","$09e991522ca7e64e$var$createMatrix","$09e991522ca7e64e$var$renderNums","rowIndex","cellValue","cellIndex","renderedCell","className","textContent","classList","add","$09e991522ca7e64e$var$addNum","Math","random","floor","col","$09e991522ca7e64e$var$toggleHidden","block","dependence","toggle","columns","addEventListener","e","key","startsWith","event","preventDefault","moveDirection","replace","$09e991522ca7e64e$var$checkVictory","moveVariants","variant"],"version":3,"file":"index.a3287947.js.map"}